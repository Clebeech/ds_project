# éƒ¨ç½²æ­¥éª¤ï¼ˆè¯¦ç»†ç‰ˆï¼‰

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡æ¸…å•

- [x] ä»£ç å·²å‡†å¤‡å¥½
- [x] éƒ¨ç½²é…ç½®æ–‡ä»¶å·²åˆ›å»º
- [ ] ä»£ç å·²æäº¤åˆ°GitHub
- [ ] Railwayè´¦å·å·²æ³¨å†Œ
- [ ] Vercelè´¦å·å·²æ³¨å†Œ

---

## ç¬¬ä¸€æ­¥ï¼šæäº¤ä»£ç åˆ°GitHub

### 1.1 æ£€æŸ¥å½“å‰çŠ¶æ€
```bash
# è¿è¡Œæ£€æŸ¥è„šæœ¬
./deploy_helper.sh
```

### 1.2 æäº¤æ‰€æœ‰æ›´æ”¹
```bash
# æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# æäº¤æ›´æ”¹
git commit -m "å‡†å¤‡éƒ¨ç½²ï¼šæ·»åŠ éƒ¨ç½²é…ç½®å’Œä¼˜åŒ–åŠŸèƒ½"

# å¦‚æœè¿˜æ²¡æœ‰è¿œç¨‹ä»“åº“ï¼Œå…ˆåˆ›å»ºGitHubä»“åº“ï¼Œç„¶åï¼š
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/ä½ çš„ä»“åº“å.git
git branch -M main
git push -u origin main

# å¦‚æœå·²æœ‰è¿œç¨‹ä»“åº“ï¼Œç›´æ¥æ¨é€ï¼š
git push
```

---

## ç¬¬äºŒæ­¥ï¼šéƒ¨ç½²åç«¯åˆ°Railway

### 2.1 æ³¨å†ŒRailway
1. è®¿é—® https://railway.app
2. ç‚¹å‡»å³ä¸Šè§’ "Login"
3. é€‰æ‹© "Login with GitHub"
4. æˆæƒRailwayè®¿é—®ä½ çš„GitHub

### 2.2 åˆ›å»ºé¡¹ç›®å¹¶éƒ¨ç½²
1. ç‚¹å‡» "New Project"
2. é€‰æ‹© "Deploy from GitHub repo"
3. é€‰æ‹©ä½ çš„ä»“åº“
4. Railwayä¼šè‡ªåŠ¨ï¼š
   - æ£€æµ‹åˆ°Flaskåº”ç”¨
   - å®‰è£…ä¾èµ–
   - å¼€å§‹éƒ¨ç½²

### 2.3 æ·»åŠ MySQLæ•°æ®åº“
1. åœ¨é¡¹ç›®é¡µé¢ï¼Œç‚¹å‡» "+ New"
2. é€‰æ‹© "Database" â†’ "Add MySQL"
3. ç­‰å¾…æ•°æ®åº“åˆ›å»ºï¼ˆçº¦1-2åˆ†é’Ÿï¼‰

### 2.4 é…ç½®ç¯å¢ƒå˜é‡
1. ç‚¹å‡»æ•°æ®åº“æœåŠ¡å¡ç‰‡
2. è¿›å…¥ "Variables" æ ‡ç­¾
3. ä½ ä¼šçœ‹åˆ°Railwayè‡ªåŠ¨ç”Ÿæˆçš„ç¯å¢ƒå˜é‡ï¼š
   - `MYSQLHOST`
   - `MYSQLUSER`
   - `MYSQLPASSWORD`
   - `MYSQLDATABASE`
   - `MYSQLPORT`

4. ç‚¹å‡»WebæœåŠ¡ï¼ˆä½ çš„Flaskåº”ç”¨ï¼‰
5. è¿›å…¥ "Variables" æ ‡ç­¾
6. ç‚¹å‡» "New Variable"ï¼Œæ·»åŠ ä»¥ä¸‹å˜é‡ï¼š
   ```
   DB_HOST = ${{MySQL.MYSQLHOST}}
   DB_USER = ${{MySQL.MYSQLUSER}}
   DB_PASSWORD = ${{MySQL.MYSQLPASSWORD}}
   DB_NAME = ${{MySQL.MYSQLDATABASE}}
   ```
   
   æ³¨æ„ï¼šä½¿ç”¨ `${{MySQL.å˜é‡å}}` çš„æ ¼å¼æ¥å¼•ç”¨æ•°æ®åº“æœåŠ¡çš„å˜é‡

### 2.5 å¯¼å…¥æ•°æ®åº“ç»“æ„å’Œæ•°æ®

**æ–¹å¼Aï¼šä½¿ç”¨Railwayçš„MySQLç»ˆç«¯ï¼ˆæ¨èï¼‰**

1. ç‚¹å‡»MySQLæ•°æ®åº“æœåŠ¡
2. ç‚¹å‡» "Connect" â†’ é€‰æ‹© "MySQL"
3. åœ¨æ‰“å¼€çš„ç»ˆç«¯ä¸­ï¼Œè¿è¡Œï¼š

```sql
-- åˆ›å»ºæ•°æ®åº“ï¼ˆé€šå¸¸Railwayå·²ç»åˆ›å»ºå¥½äº†ï¼‰
USE poverty_alleviation_832;

-- å¯¼å…¥è¡¨ç»“æ„
-- å¤åˆ¶ plan/05_create_tables.sql çš„å†…å®¹å¹¶æ‰§è¡Œ
```

4. ç„¶åéœ€è¦å¯¼å…¥æ•°æ®ã€‚æœ‰ä¸¤ç§æ–¹å¼ï¼š

**æ–¹å¼Bï¼šä»æœ¬åœ°å¯¼å‡ºå¹¶å¯¼å…¥**

```bash
# åœ¨æœ¬åœ°è¿è¡Œå¯¼å‡ºè„šæœ¬
./export_database.sh

# æˆ–è€…æ‰‹åŠ¨å¯¼å‡º
mysqldump -u root -p poverty_alleviation_832 > database_dump.sql
```

ç„¶ååœ¨Railwayçš„MySQLç»ˆç«¯ä¸­ï¼š
```bash
# ä½¿ç”¨mysqlå‘½ä»¤å¯¼å…¥ï¼ˆåœ¨Railwayç»ˆç«¯ä¸­ï¼‰
mysql -h $MYSQLHOST -u $MYSQLUSER -p$MYSQLPASSWORD $MYSQLDATABASE < database_dump.sql
```

**æ–¹å¼Cï¼šä½¿ç”¨Pythonè„šæœ¬å¯¼å…¥ï¼ˆæ¨èï¼‰**

1. åœ¨Railwayçš„WebæœåŠ¡ä¸­ï¼Œè¿›å…¥ "Settings" â†’ "Generate Domain"
2. è·å–æ•°æ®åº“è¿æ¥ä¿¡æ¯
3. åœ¨æœ¬åœ°ä¿®æ”¹ `backend/db.py` ä¸´æ—¶ä½¿ç”¨Railwayçš„æ•°æ®åº“ä¿¡æ¯
4. è¿è¡Œï¼š
```bash
python backend/init_database.py
```

### 2.6 è·å–åç«¯åœ°å€
1. ç‚¹å‡»WebæœåŠ¡
2. è¿›å…¥ "Settings"
3. ç‚¹å‡» "Generate Domain"ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
4. å¤åˆ¶ç”Ÿæˆçš„URLï¼Œä¾‹å¦‚ï¼š`https://your-app.railway.app`
5. **é‡è¦**ï¼šè®°ä¸‹è¿™ä¸ªåœ°å€ï¼Œç¨åéœ€è¦ç”¨äºå‰ç«¯é…ç½®

### 2.7 æµ‹è¯•åç«¯API
åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š
```
https://your-app.railway.app/api/stats/overview
```

åº”è¯¥è¿”å›JSONæ•°æ®ã€‚å¦‚æœè¿”å›æ•°æ®ï¼Œè¯´æ˜åç«¯éƒ¨ç½²æˆåŠŸï¼

---

## ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²å‰ç«¯åˆ°Vercel

### 3.1 æ³¨å†ŒVercel
1. è®¿é—® https://vercel.com
2. ç‚¹å‡» "Sign Up"
3. é€‰æ‹© "Continue with GitHub"
4. æˆæƒVercelè®¿é—®ä½ çš„GitHub

### 3.2 å¯¼å…¥é¡¹ç›®
1. ç‚¹å‡» "Add New..." â†’ "Project"
2. é€‰æ‹©ä½ çš„GitHubä»“åº“
3. é…ç½®é¡¹ç›®è®¾ç½®ï¼š
   - **Framework Preset**: Other
   - **Root Directory**: ç‚¹å‡» "Edit" â†’ è¾“å…¥ `frontend`
   - **Build Command**: ç•™ç©ºï¼ˆé™æ€æ–‡ä»¶ï¼Œæ— éœ€æ„å»ºï¼‰
   - **Output Directory**: `.`ï¼ˆå½“å‰ç›®å½•ï¼Œå³frontendç›®å½•ï¼‰
   - **Install Command**: ç•™ç©º

4. ç‚¹å‡» "Deploy"

### 3.3 æ›´æ–°APIåœ°å€
1. éƒ¨ç½²å®Œæˆåï¼ŒVercelä¼šç»™ä½ ä¸€ä¸ªURLï¼Œä¾‹å¦‚ï¼š`https://your-project.vercel.app`
2. åœ¨æœ¬åœ°ä¿®æ”¹ `frontend/index.html`ï¼š
   - æ‰¾åˆ°è¿™ä¸€è¡Œï¼š
   ```javascript
   window.API_BASE = window.location.hostname === 'localhost' 
       ? 'http://localhost:5001/api'
       : 'https://your-backend-url.railway.app/api';  // éƒ¨ç½²åä¿®æ”¹è¿™é‡Œ
   ```
   - å°† `your-backend-url.railway.app` æ›¿æ¢ä¸ºä½ çš„Railwayåç«¯åœ°å€
   - ä¾‹å¦‚ï¼š`https://your-app.railway.app/api`

3. æäº¤å¹¶æ¨é€æ›´æ”¹ï¼š
```bash
git add frontend/index.html
git commit -m "æ›´æ–°å‰ç«¯APIåœ°å€ä¸ºRailwayåç«¯"
git push
```

4. Vercelä¼šè‡ªåŠ¨æ£€æµ‹åˆ°æ›´æ”¹å¹¶é‡æ–°éƒ¨ç½²ï¼ˆé€šå¸¸1-2åˆ†é’Ÿï¼‰

### 3.4 æµ‹è¯•å‰ç«¯
è®¿é—®ä½ çš„Vercelåœ°å€ï¼Œæ£€æŸ¥ï¼š
- é¡µé¢æ˜¯å¦æ­£å¸¸åŠ è½½
- æ•°æ®æ˜¯å¦èƒ½æ­£å¸¸æ˜¾ç¤º
- æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

---

## ç¬¬å››æ­¥ï¼šéªŒè¯éƒ¨ç½²

### 4.1 æµ‹è¯•æ¸…å•
- [ ] åç«¯APIå¯ä»¥è®¿é—®ï¼š`https://your-backend.railway.app/api/stats/overview`
- [ ] å‰ç«¯é¡µé¢å¯ä»¥è®¿é—®ï¼š`https://your-project.vercel.app`
- [ ] å‰ç«¯å¯ä»¥æ­£å¸¸åŠ è½½æ•°æ®
- [ ] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ

### 4.2 åˆ†äº«é“¾æ¥
éƒ¨ç½²æˆåŠŸåï¼Œä½ å¯ä»¥åˆ†äº«å‰ç«¯é“¾æ¥ç»™æœ‹å‹ï¼š
```
https://your-project.vercel.app
```

---

## å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜1ï¼šåç«¯éƒ¨ç½²å¤±è´¥
**å¯èƒ½åŸå› ï¼š**
- ä¾èµ–å®‰è£…å¤±è´¥
- æ•°æ®åº“è¿æ¥å¤±è´¥

**è§£å†³æ–¹æ³•ï¼š**
1. æŸ¥çœ‹Railwayçš„æ—¥å¿—ï¼ˆç‚¹å‡»WebæœåŠ¡ â†’ "Deployments" â†’ æŸ¥çœ‹æ—¥å¿—ï¼‰
2. æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®
3. ç¡®ä¿ `Procfile` å’Œ `requirements.txt` å­˜åœ¨

### é—®é¢˜2ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥
**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®å¼•ç”¨æ•°æ®åº“æœåŠ¡
2. ç¡®ä¿æ•°æ®åº“æœåŠ¡å·²å¯åŠ¨
3. æ£€æŸ¥æ•°æ®åº“åç§°æ˜¯å¦æ­£ç¡®

### é—®é¢˜3ï¼šå‰ç«¯æ— æ³•è®¿é—®API
**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥å‰ç«¯ä¸­çš„APIåœ°å€æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥CORSè®¾ç½®ï¼ˆå·²åœ¨backend/app.pyä¸­é…ç½®ä¸ºå…è®¸æ‰€æœ‰æ¥æºï¼‰
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯

### é—®é¢˜4ï¼šæ•°æ®æœªæ˜¾ç¤º
**è§£å†³æ–¹æ³•ï¼š**
1. ç¡®è®¤æ•°æ®å·²æˆåŠŸå¯¼å…¥åˆ°Railwayæ•°æ®åº“
2. æ£€æŸ¥åç«¯APIæ˜¯å¦è¿”å›æ•°æ®
3. æŸ¥çœ‹æµè§ˆå™¨ç½‘ç»œè¯·æ±‚æ˜¯å¦æˆåŠŸ

---

## è´¹ç”¨è¯´æ˜

- **Railway**: 
  - å…è´¹å¥—é¤ï¼šæ¯æœˆ$5é¢åº¦
  - é€šå¸¸è¶³å¤Ÿä¸ªäººé¡¹ç›®ä½¿ç”¨
  - è¶…å‡ºåæŒ‰ä½¿ç”¨é‡ä»˜è´¹

- **Vercel**: 
  - å…è´¹å¥—é¤å¯¹ä¸ªäººé¡¹ç›®å®Œå…¨å¤Ÿç”¨
  - æ— é™å¸¦å®½å’Œè¯·æ±‚
  - è‡ªåŠ¨HTTPS

**æ€»è®¡ï¼šå®Œå…¨å…è´¹ï¼ˆåœ¨å…è´¹é¢åº¦å†…ï¼‰**

---

## å®Œæˆï¼ğŸ‰

éƒ¨ç½²å®Œæˆåï¼Œä½ çš„åº”ç”¨å°±å¯ä»¥é€šè¿‡é“¾æ¥è®¿é—®äº†ï¼

- **å‰ç«¯åœ°å€**ï¼š`https://your-project.vercel.app`
- **åç«¯API**ï¼š`https://your-backend.railway.app/api`

ç°åœ¨å¯ä»¥åˆ†äº«ç»™æœ‹å‹äº†ï¼

